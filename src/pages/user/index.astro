---
import BaseLayout from "../../layout/BaseLayout.astro";
---

<BaseLayout pageTitle="User Dashboard">
    <main class="bg-marrow">
        <div
            class="dashboard-container max-w-xl py-large px-default row g-0 m-auto"
        >
            <div class="mb-5">
                <h1 class="body-lg text-blood">
                    Assalamu'alaikum Abdullah bin Uwais.
                </h1>
                <p>Selamat datang di dashboard pengguna QurbanPlus.</p>
            </div>
            <div
                class="dashboard-nav g-0 border border-bone d-flex flex-md-column justify-content-start h-fit"
            >
                <a class="link-black flex-1 h-100">
                    <div
                        class="user-nav user-nav-active d-flex border border-bone align-items-center"
                    >
                        <img
                            src="/assets/icons/ic-user-red.svg"
                            alt="icon profile"
                        />
                        <p>Profile</p>
                    </div>
                </a>

                <a href="/user/pesanan" class="link-black flex-1 h-100">
                    <div
                        class="user-nav d-flex border border-bone align-items-center"
                    >
                        <img
                            src="/assets/icons/ic-order-red.svg"
                            alt="icon profile"
                        />
                        <p>Pesanan</p>
                    </div>
                </a>

                <a href="" class="link-black flex-1 h-100">
                    <div
                        class="user-nav d-flex border border-bone align-items-center"
                    >
                        <img
                            src="/assets/icons/ic-cart-red.svg"
                            alt="icon profile"
                        />
                        <p>Keranjang</p>
                    </div>
                </a>
            </div>

            <div class="content-container g-0 p-3 flex-1 position-relative">
                <button
                    class="btn btn-sm position-absolute"
                    style="top: 12px; right: 16px;"
                    id="btnEdit">Edit</button
                >

                <fieldset class="d-flex flex-column gap-3">
                    <div class="d-flex flex-column gap-4">
                        <div>
                            <label
                                for="exampleFormControlInput1"
                                class="form-label">Nama Lengkap</label
                            >
                            <input
                                type="text"
                                class="form-control"
                                id="namaPemesan"
                                value="Abdullah bin Uwais"
                                disabled
                                required
                            />
                            <div class="invalid-feedback">
                                Nama belum ditulis
                            </div>
                        </div>
                    </div>

                    <div class="d-flex flex-column gap-4">
                        <div>
                            <label for="nomorWhatsapp" class="form-label"
                                >Nomor Whatsapp</label
                            >
                            <input
                                type="tel"
                                class="form-control"
                                id="nomorWhatsapp"
                                inputmode="numeric"
                                minlength="10"
                                placeholder="081212345678"
                                required
                                disabled
                            />
                        </div>
                    </div>

                    <div class="d-flex flex-column">
                        <div>
                            <label
                                for="exampleFormControlInput1"
                                class="form-label">Email</label
                            >
                            <input
                                type="email"
                                class="form-control"
                                id="alamatEmail"
                                value="abdullahbinuwais@gmail.com"
                                disabled
                                required
                            />
                        </div>
                    </div>

                    <div class="d-flex flex-column">
                        <label class="form-label">Alamat</label>
                        <select
                            id="selectKota"
                            class="form-select"
                            aria-label="Default select example"
                            disabled
                        >
                            <option value="" selected>Pilih Kota</option>
                            <option value="KepulauanSeribu"
                                >Kepulauan Seribu</option
                            >
                            <option value="JakartaUtara">Jakarta Utara</option>
                            <option value="JakartaTimur">Jakarta Timur</option>
                            <option value="JakartaSelatan" selected
                                >Jakarta Selatan</option
                            >
                            <option value="JakartaBarat">Jakarta Barat</option>
                            <option value="Depok">Depok</option>
                            <option value="Bogor">Bogor</option>
                            <option value="Bekasi">Bekasi</option>
                            <option value="Tangerang">Tangerang</option>
                            <option value="TangerangSelatan"
                                >Tangerang Selatan</option
                            >
                        </select>
                    </div>

                    <div class="d-flex flex-column">
                        <select
                            id="selectKecamatan"
                            class="form-select"
                            aria-label="Default select example"
                            disabled
                        >
                            <option value="JAGAKARSA" selected>JAGAKARSA</option
                            >
                        </select>
                    </div>

                    <div>
                        <textarea
                            disabled
                            class="form-control"
                            id="alamatRumah"
                            rows="4"
                            >Jl. Yang Lurus No. 103, Rt.03 Rw.09, SRENGSENGSAWAH
                        </textarea>
                    </div>
                </fieldset>
                <button
                    id="btnSimpan"
                    class="btn btn-outline-success float-end mt-3"
                    style="display: none;">Simpan</button
                >
            </div>
        </div>
    </main>
</BaseLayout>

<script>
    const kecamatanList = {
        KepulauanSeribu: [
            {
                id: "3101010",
                regency_id: "3101",
                name: "KEPULAUAN SERIBU SELATAN",
            },
            {
                id: "3101020",
                regency_id: "3101",
                name: "KEPULAUAN SERIBU UTARA",
            },
        ],

        JakartaSelatan: [
            {
                id: "3171010",
                regency_id: "3171",
                name: "JAGAKARSA",
            },
            {
                id: "3171020",
                regency_id: "3171",
                name: "PASAR MINGGU",
            },
            {
                id: "3171030",
                regency_id: "3171",
                name: "CILANDAK",
            },
            {
                id: "3171040",
                regency_id: "3171",
                name: "PESANGGRAHAN",
            },
            {
                id: "3171050",
                regency_id: "3171",
                name: "KEBAYORAN LAMA",
            },
            {
                id: "3171060",
                regency_id: "3171",
                name: "KEBAYORAN BARU",
            },
            {
                id: "3171070",
                regency_id: "3171",
                name: "MAMPANG PRAPATAN",
            },
            {
                id: "3171080",
                regency_id: "3171",
                name: "PANCORAN",
            },
            {
                id: "3171090",
                regency_id: "3171",
                name: "TEBET",
            },
            {
                id: "3171100",
                regency_id: "3171",
                name: "SETIA BUDI",
            },
        ],

        JakartaTimur: [
            {
                id: "3172010",
                regency_id: "3172",
                name: "PASAR REBO",
            },
            {
                id: "3172020",
                regency_id: "3172",
                name: "CIRACAS",
            },
            {
                id: "3172030",
                regency_id: "3172",
                name: "CIPAYUNG",
            },
            {
                id: "3172040",
                regency_id: "3172",
                name: "MAKASAR",
            },
            {
                id: "3172050",
                regency_id: "3172",
                name: "KRAMAT JATI",
            },
            {
                id: "3172060",
                regency_id: "3172",
                name: "JATINEGARA",
            },
            {
                id: "3172070",
                regency_id: "3172",
                name: "DUREN SAWIT",
            },
            {
                id: "3172080",
                regency_id: "3172",
                name: "CAKUNG",
            },
            {
                id: "3172090",
                regency_id: "3172",
                name: "PULO GADUNG",
            },
            {
                id: "3172100",
                regency_id: "3172",
                name: "MATRAMAN",
            },
        ],

        JakartaPusat: [
            {
                id: "3173010",
                regency_id: "3173",
                name: "TANAH ABANG",
            },
            {
                id: "3173020",
                regency_id: "3173",
                name: "MENTENG",
            },
            {
                id: "3173030",
                regency_id: "3173",
                name: "SENEN",
            },
            {
                id: "3173040",
                regency_id: "3173",
                name: "JOHAR BARU",
            },
            {
                id: "3173050",
                regency_id: "3173",
                name: "CEMPAKA PUTIH",
            },
            {
                id: "3173060",
                regency_id: "3173",
                name: "KEMAYORAN",
            },
            {
                id: "3173070",
                regency_id: "3173",
                name: "SAWAH BESAR",
            },
            {
                id: "3173080",
                regency_id: "3173",
                name: "GAMBIR",
            },
        ],

        JakartaBarat: [
            {
                id: "3174010",
                regency_id: "3174",
                name: "KEMBANGAN",
            },
            {
                id: "3174020",
                regency_id: "3174",
                name: "KEBON JERUK",
            },
            {
                id: "3174030",
                regency_id: "3174",
                name: "PALMERAH",
            },
            {
                id: "3174040",
                regency_id: "3174",
                name: "GROGOL PETAMBURAN",
            },
            {
                id: "3174050",
                regency_id: "3174",
                name: "TAMBORA",
            },
            {
                id: "3174060",
                regency_id: "3174",
                name: "TAMAN SARI",
            },
            {
                id: "3174070",
                regency_id: "3174",
                name: "CENGKARENG",
            },
            {
                id: "3174080",
                regency_id: "3174",
                name: "KALI DERES",
            },
        ],

        JakartaUtara: [
            {
                id: "3175010",
                regency_id: "3175",
                name: "PENJARINGAN",
            },
            {
                id: "3175020",
                regency_id: "3175",
                name: "PADEMANGAN",
            },
            {
                id: "3175030",
                regency_id: "3175",
                name: "TANJUNG PRIOK",
            },
            {
                id: "3175040",
                regency_id: "3175",
                name: "KOJA",
            },
            {
                id: "3175050",
                regency_id: "3175",
                name: "KELAPA GADING",
            },
            {
                id: "3175060",
                regency_id: "3175",
                name: "CILINCING",
            },
        ],

        Bogor: [
            {
                id: "3201010",
                regency_id: "3201",
                name: "NANGGUNG",
            },
            {
                id: "3201020",
                regency_id: "3201",
                name: "LEUWILIANG",
            },
            {
                id: "3201021",
                regency_id: "3201",
                name: "LEUWISADENG",
            },
            {
                id: "3201030",
                regency_id: "3201",
                name: "PAMIJAHAN",
            },
            {
                id: "3201040",
                regency_id: "3201",
                name: "CIBUNGBULANG",
            },
            {
                id: "3201050",
                regency_id: "3201",
                name: "CIAMPEA",
            },
            {
                id: "3201051",
                regency_id: "3201",
                name: "TENJOLAYA",
            },
            {
                id: "3201060",
                regency_id: "3201",
                name: "DRAMAGA",
            },
            {
                id: "3201070",
                regency_id: "3201",
                name: "CIOMAS",
            },
            {
                id: "3201071",
                regency_id: "3201",
                name: "TAMANSARI",
            },
            {
                id: "3201080",
                regency_id: "3201",
                name: "CIJERUK",
            },
            {
                id: "3201081",
                regency_id: "3201",
                name: "CIGOMBONG",
            },
            {
                id: "3201090",
                regency_id: "3201",
                name: "CARINGIN",
            },
            {
                id: "3201100",
                regency_id: "3201",
                name: "CIAWI",
            },
            {
                id: "3201110",
                regency_id: "3201",
                name: "CISARUA",
            },
            {
                id: "3201120",
                regency_id: "3201",
                name: "MEGAMENDUNG",
            },
            {
                id: "3201130",
                regency_id: "3201",
                name: "SUKARAJA",
            },
            {
                id: "3201140",
                regency_id: "3201",
                name: "BABAKAN MADANG",
            },
            {
                id: "3201150",
                regency_id: "3201",
                name: "SUKAMAKMUR",
            },
            {
                id: "3201160",
                regency_id: "3201",
                name: "CARIU",
            },
            {
                id: "3201161",
                regency_id: "3201",
                name: "TANJUNGSARI",
            },
            {
                id: "3201170",
                regency_id: "3201",
                name: "JONGGOL",
            },
            {
                id: "3201180",
                regency_id: "3201",
                name: "CILEUNGSI",
            },
            {
                id: "3201181",
                regency_id: "3201",
                name: "KELAPA NUNGGAL",
            },
            {
                id: "3201190",
                regency_id: "3201",
                name: "GUNUNG PUTRI",
            },
            {
                id: "3201200",
                regency_id: "3201",
                name: "CITEUREUP",
            },
            {
                id: "3201210",
                regency_id: "3201",
                name: "CIBINONG",
            },
            {
                id: "3201220",
                regency_id: "3201",
                name: "BOJONG GEDE",
            },
            {
                id: "3201221",
                regency_id: "3201",
                name: "TAJUR HALANG",
            },
            {
                id: "3201230",
                regency_id: "3201",
                name: "KEMANG",
            },
            {
                id: "3201231",
                regency_id: "3201",
                name: "RANCA BUNGUR",
            },
            {
                id: "3201240",
                regency_id: "3201",
                name: "PARUNG",
            },
            {
                id: "3201241",
                regency_id: "3201",
                name: "CISEENG",
            },
            {
                id: "3201250",
                regency_id: "3201",
                name: "GUNUNG SINDUR",
            },
            {
                id: "3201260",
                regency_id: "3201",
                name: "RUMPIN",
            },
            {
                id: "3201270",
                regency_id: "3201",
                name: "CIGUDEG",
            },
            {
                id: "3201271",
                regency_id: "3201",
                name: "SUKAJAYA",
            },
            {
                id: "3201280",
                regency_id: "3201",
                name: "JASINGA",
            },
            {
                id: "3201290",
                regency_id: "3201",
                name: "TENJO",
            },
            {
                id: "3201300",
                regency_id: "3201",
                name: "PARUNG PANJANG",
            },
        ],

        Depok: [
            {
                id: "3276010",
                regency_id: "3276",
                name: "SAWANGAN",
            },
            {
                id: "3276011",
                regency_id: "3276",
                name: "BOJONGSARI",
            },
            {
                id: "3276020",
                regency_id: "3276",
                name: "PANCORAN MAS",
            },
            {
                id: "3276021",
                regency_id: "3276",
                name: "CIPAYUNG",
            },
            {
                id: "3276030",
                regency_id: "3276",
                name: "SUKMA JAYA",
            },
            {
                id: "3276031",
                regency_id: "3276",
                name: "CILODONG",
            },
            {
                id: "3276040",
                regency_id: "3276",
                name: "CIMANGGIS",
            },
            {
                id: "3276041",
                regency_id: "3276",
                name: "TAPOS",
            },
            {
                id: "3276050",
                regency_id: "3276",
                name: "BEJI",
            },
            {
                id: "3276060",
                regency_id: "3276",
                name: "LIMO",
            },
            {
                id: "3276061",
                regency_id: "3276",
                name: "CINERE",
            },
            ,
        ],

        Bekasi: [
            {
                id: "3275010",
                regency_id: "3275",
                name: "PONDOKGEDE",
            },
            {
                id: "3275011",
                regency_id: "3275",
                name: "JATISAMPURNA",
            },
            {
                id: "3275012",
                regency_id: "3275",
                name: "PONDOKMELATI",
            },
            {
                id: "3275020",
                regency_id: "3275",
                name: "JATIASIH",
            },
            {
                id: "3275030",
                regency_id: "3275",
                name: "BANTARGEBANG",
            },
            {
                id: "3275031",
                regency_id: "3275",
                name: "MUSTIKAJAYA",
            },
            {
                id: "3275040",
                regency_id: "3275",
                name: "BEKASI TIMUR",
            },
            {
                id: "3275041",
                regency_id: "3275",
                name: "RAWALUMBU",
            },
            {
                id: "3275050",
                regency_id: "3275",
                name: "BEKASI SELATAN",
            },
            {
                id: "3275060",
                regency_id: "3275",
                name: "BEKASI BARAT",
            },
            {
                id: "3275061",
                regency_id: "3275",
                name: "MEDAN SATRIA",
            },
            {
                id: "3275070",
                regency_id: "3275",
                name: "BEKASI UTARA",
            },
        ],

        Tangerang: [
            {
                id: "3603010",
                regency_id: "3603",
                name: "CISOKA",
            },
            {
                id: "3603011",
                regency_id: "3603",
                name: "SOLEAR",
            },
            {
                id: "3603020",
                regency_id: "3603",
                name: "TIGARAKSA",
            },
            {
                id: "3603021",
                regency_id: "3603",
                name: "JAMBE",
            },
            {
                id: "3603030",
                regency_id: "3603",
                name: "CIKUPA",
            },
            {
                id: "3603040",
                regency_id: "3603",
                name: "PANONGAN",
            },
            {
                id: "3603050",
                regency_id: "3603",
                name: "CURUG",
            },
            {
                id: "3603051",
                regency_id: "3603",
                name: "KELAPA DUA",
            },
            {
                id: "3603060",
                regency_id: "3603",
                name: "LEGOK",
            },
            {
                id: "3603070",
                regency_id: "3603",
                name: "PAGEDANGAN",
            },
            {
                id: "3603081",
                regency_id: "3603",
                name: "CISAUK",
            },
            {
                id: "3603120",
                regency_id: "3603",
                name: "PASARKEMIS",
            },
            {
                id: "3603121",
                regency_id: "3603",
                name: "SINDANG JAYA",
            },
            {
                id: "3603130",
                regency_id: "3603",
                name: "BALARAJA",
            },
            {
                id: "3603131",
                regency_id: "3603",
                name: "JAYANTI",
            },
            {
                id: "3603132",
                regency_id: "3603",
                name: "SUKAMULYA",
            },
            {
                id: "3603140",
                regency_id: "3603",
                name: "KRESEK",
            },
            {
                id: "3603141",
                regency_id: "3603",
                name: "GUNUNG KALER",
            },
            {
                id: "3603150",
                regency_id: "3603",
                name: "KRONJO",
            },
            {
                id: "3603151",
                regency_id: "3603",
                name: "MEKAR BARU",
            },
            {
                id: "3603160",
                regency_id: "3603",
                name: "MAUK",
            },
            {
                id: "3603161",
                regency_id: "3603",
                name: "KEMIRI",
            },
            {
                id: "3603162",
                regency_id: "3603",
                name: "SUKADIRI",
            },
            {
                id: "3603170",
                regency_id: "3603",
                name: "RAJEG",
            },
            {
                id: "3603180",
                regency_id: "3603",
                name: "SEPATAN",
            },
            {
                id: "3603181",
                regency_id: "3603",
                name: "SEPATAN TIMUR",
            },
            {
                id: "3603190",
                regency_id: "3603",
                name: "PAKUHAJI",
            },
            {
                id: "3603200",
                regency_id: "3603",
                name: "TELUKNAGA",
            },
            {
                id: "3603210",
                regency_id: "3603",
                name: "KOSAMBI",
            },
        ],

        TangerangSelatan: [
            {
                id: "3674010",
                regency_id: "3674",
                name: "SETU",
            },
            {
                id: "3674020",
                regency_id: "3674",
                name: "SERPONG",
            },
            {
                id: "3674030",
                regency_id: "3674",
                name: "PAMULANG",
            },
            {
                id: "3674040",
                regency_id: "3674",
                name: "CIPUTAT",
            },
            {
                id: "3674050",
                regency_id: "3674",
                name: "CIPUTAT TIMUR",
            },
            {
                id: "3674060",
                regency_id: "3674",
                name: "PONDOK AREN",
            },
            {
                id: "3674070",
                regency_id: "3674",
                name: "SERPONG UTARA",
            },
        ],
    };

    const groupSelectKota = document.getElementById("selectKota");
    const groupSelectKecamatan = document.getElementById("selectKecamatan");

    function updateGroupKota() {
        const selectedKota = groupSelectKota.value;

        groupSelectKecamatan.innerHTML =
            '<option value="">Pilih Kecamatan</option>';

        if (kecamatanList[selectedKota]) {
            addOptionsToSelect(
                groupSelectKecamatan,
                kecamatanList[selectedKota],
            );
        }
    }

    function addOptionsToSelect(selectElement, options) {
        options.forEach((option) => {
            const optionElement = document.createElement("option");
            optionElement.value = option.name;
            optionElement.textContent = option.name;
            selectElement.appendChild(optionElement);
        });
    }

    groupSelectKota.addEventListener("change", updateGroupKota);

    // Edit form

    const namaPemesan = document.getElementById("namaPemesan");
    const nomorWhatsapp = document.getElementById("nomorWhatsapp");
    const alamatEmail = document.getElementById("alamatEmail");
    const selectKota = document.getElementById("selectKota");
    const selectKecamatan = document.getElementById("selectKecamatan");
    const alamatRumah = document.getElementById("alamatRumah");

    const editButton = document.querySelector("#btnEdit");
    const simpanButton = document.querySelector("#btnSimpan");

    editButton.addEventListener("click", toggleEdit);

    function toggleEdit() {
        const elementsToToggle = [
            namaPemesan,
            nomorWhatsapp,
            alamatEmail,
            selectKota,
            selectKecamatan,
            alamatRumah,
        ];

        elementsToToggle.forEach((element) => {
            element.disabled = false;
        });

        simpanButton.style.display = "block";
    }

    function simpan() {
        const elementsToToggle = [
            namaPemesan,
            nomorWhatsapp,
            alamatEmail,
            selectKota,
            selectKecamatan,
            alamatRumah,
        ];

        elementsToToggle.forEach((element) => {
            element.disabled = true;
        });

        simpanButton.style.display = "none";
    }

    simpanButton.addEventListener("click", simpan);
</script>
